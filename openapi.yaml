openapi: 3.0.3
info:
  title: MontyCloud Image Service
  version: "1.0.0"
servers:
  - url: https://api.example.com/v1
paths:
  /images:
    post:
      summary: Request presigned upload URL
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [user_id, filename, content_type, size]
              properties:
                user_id: { type: string }
                filename: { type: string }
                content_type: { type: string }
                size: { type: integer }
                tags: { type: array, items: { type: string } }
      responses:
        "201":
          description: presigned URL returned
  /images/{image_id}/complete:
    post:
      summary: Confirm upload and persist metadata
      parameters:
        - name: image_id
          in: path
          required: true
          schema: { type: string }
      responses:
        "200":
          description: Metadata persisted
  /images:
    get:
      summary: List images (filters)
      parameters:
        - in: query
          name: user_id
          schema: { type: string }
        - in: query
          name: tag
          schema: { type: string }
        - in: query
          name: limit
          schema: { type: integer, default: 20 }
        - in: query
          name: cursor
          schema: { type: string }
      responses:
        "200":
          description: list
  /images/{image_id}:
    get:
      summary: Get image metadata and presigned GET URL
    delete:
      summary: Delete image (soft/hard)
